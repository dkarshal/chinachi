<script>
    var mark_button = document.querySelectorAll('.mark_button')
    function toggleMark(element) {
        element.classList.toggle("marked");
        updateDatabase(element.id);
        
}
function updateDatabase(studentID) {
    // Make an AJAX request to the server
    fetch(`/update_database/${studentID}`, {
        method: 'POST', // or 'PUT' or 'PATCH' depending on your server endpoint
        headers: {
            'Content-Type': 'application/json',
            // Add any additional headers as needed
        },
        body: JSON.stringify({
            // Add any data you need to send to the server for the update
            // For example, you might want to send the student ID
            studentID: studentID,
        }),
    })
    .then(response => {
        // Handle the response from the server
        if (response.ok) {
            // Update the client-side UI or perform other actions as needed
            console.log('Database updated successfully');
        } else {
            console.error('Failed to update database');
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
}
    function toggleMark(element) {
            element.classList.toggle("marked");
            updateDatabase(element.id);
            
    }
</script>
<style>
    .mark_button.marked {
        background-color: green;
    }
    .mark_button {
        background-color: red;
    }

    #id class{}
    
</style>
{% for i in classes %}
<!-- <div class="{{i}}" style="width: 100%;"> -->
{% for student in students %}
    {% if student["DivisionName"] == i %}
    <div id="{{i}}" class="w-full max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
        
    
        <div class="flex flex-col items-center py-5 pb-10">
        <div class="relative w-10 h-10 overflow-hidden bg-gray-100 rounded-full dark:bg-gray-600">
            <svg class="absolute w-12 h-12 text-gray-400 -left-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path></svg>
        </div>
        <h5 class="mb-1 text-xl font-medium text-gray-900 dark:text-white">{{student["DisplayNameAll"]}}</h5>
            <span class="text-sm text-gray-500 dark:text-gray-400">{{student["DivisionName"]}}</span>
            <div class="flex mt-4 md:mt-6">
                    <a href="#" id="{{student['ID']}}" onclick="toggleMark(this)" class="inline-flex items-center px-4 py-2 text-sm font-medium text-center text-white rounded-lg {{student['hover']}} focus:ring-4 focus:outline-none focus:ring-green-300 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800 mark_button {{student['marked']}}">Mark</a>
            </div>
        </div>

    </div>
    {% endif %}
{% endfor %}
<!-- </div> -->
{% endfor %}